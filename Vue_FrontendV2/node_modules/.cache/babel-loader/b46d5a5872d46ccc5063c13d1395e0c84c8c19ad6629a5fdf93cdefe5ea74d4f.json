{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// Se importan los tatos de forma local en caso de falla de la api o falla de la Base de Datos\nimport sucursales from \"@/data/sucursales.json\";\nexport default {\n  setup() {\n    return {\n      stores: [],\n      where: \"\",\n      search: \"\",\n      aftersearch: [],\n      findstore: true,\n      noresults: false,\n      amountresults: null\n    };\n  },\n  created() {\n    //  Se llama a la función getStores() para solicitar los datos legítimos de las tiendas de la base de datos\n    this.getStores();\n  },\n  methods: {\n    //  Función getStores(), solicita los datos a la API de todas las tiendas de la base de datos.\n    getStores() {\n      //  Se inicializa la variable 'stores' con una copia local de las tiendas de la base de datos, por si fallase en algún momento la conexión con la API o con la base de datos\n      this.stores = sucursales;\n      fetch(\"http://localhost:3200/api/sucursales\").then(r => r.json()).then(j => {\n        this.stores = [];\n        this.stores = j;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //  Función newsearch(), recorrera en base a la búsqueda realizada, los datos 'stores' proporcionados por la api en busca de coincidencias en las columnas: Comunidad y Departamento...\n    //  NOTA:('Se ha agregado la columna CP. Solo se ha agregado para poder realizar la búsqueda por Código Postal a modo extra, creía recomendable separar el CP en la base de datos y filtrar por CP')\n    newsearch() {\n      // Se reasigna search a search sustituyendo todo el contenido por mayusculas y se reinicializa la variable 'aftersearch' con un array vacio '[ ]'\n      this.search = this.search.toUpperCase();\n      this.aftersearch = [];\n      //  Se recorre Stores\n      for (let i = 0; i < this.stores.length; i++) {\n        if (this.stores[i].Comunidad.toUpperCase().includes(this.search) || this.stores[i].Departamento.toUpperCase().includes(this.search) || this.stores[i].CP.toUpperCase().includes(this.search)) {\n          //  Se introduce en cada vuelta del for los datos de cada tienda que cumpla la anterior condición\n          this.aftersearch.push(this.stores[i]);\n        }\n      }\n      //  Si la cantidad de tiendas que alberga la búsqueda es menor a 1 se asigna true a la variable 'noresults', activar 'noresults' proporciona la ventaja de saber si hay o no resultados\n      if (this.aftersearch.length < 1) {\n        this.noresults = true;\n      }\n      //  De lo contrario se asigna false a la variable 'noresults', se guarda la cantidad de resultados en 'amountresults' y se asigna false a la variable 'findstore', para poder ocultar el banner de búsqueda.\n      else {\n        this.noresults = false;\n        this.amountresults = this.aftersearch.length;\n        this.findstore = false;\n      }\n    },\n    //  Función maprute(), recibirá como parametro el contenido de la ubicación de la tienda que ha sido seleccionada y tratará dicha información para obtener como resultado la ruta dinámica a introducir en el iframe de GoogleMaps\n    maprute(whereis) {\n      //  Se vacia la variable 'where' y se crea una constante  'newreplace'  con un array vacio\n      this.where = \"\";\n      const newreplace = [];\n      //  Se recorre la ubicación proporcionada con el motivo de encontrar los espacios del string y sustituirlos por '%20' y por cada vuelta se irá alojando en 'newreplace' el contenido a transformar a posterior\n      for (let i = 0; i < whereis.length; i++) {\n        newreplace.push(whereis[i].replace(\" \", \"%20\"));\n      }\n      // Se transforma el array en un string con el uso de join: une todos los elementos de una matriz en una cadena de texto y devuelve esa cadena para asignarla a una variable a ser utilizada\n      this.where = newreplace.join(\"\");\n    }\n  }\n};","map":{"version":3,"names":["sucursales","setup","stores","where","search","aftersearch","findstore","noresults","amountresults","created","getStores","methods","fetch","then","r","json","j","catch","error","console","log","newsearch","toUpperCase","i","length","Comunidad","includes","Departamento","CP","push","maprute","whereis","newreplace","replace","join"],"sources":["/home/aritz/Descargas/VuePortfolioV2/Vue_FrontendV2/src/components/ListLocations.vue"],"sourcesContent":["<template>\n  <section style=\"background-color: #e4e4f4; width: 100%; padding-top: 15em\">\n    <!--wireframe: Encuentra tu sucursal-->\n    <article\n      style=\"\n        align-items: center;\n        display: flex;\n        margin-right: auto;\n        margin-left: auto;\n        position: relative;\n      \"\n      class=\"row p-2 shadow-sm\"\n    >\n      <div class=\"col-2\" />\n      <section style=\"text-align: left\" class=\"col-4 p-4\">\n        <article>\n          <h3 style=\"color: #4c9ae7\" class=\"mb-3\">\n            <b>Encuentra tu sucursal</b>\n          </h3>\n        </article>\n        <article class=\"mb-4 text-body-secondary\">\n          <b>Localiza tu sucursal más cercana</b>\n        </article>\n        <article>\n          <p class=\"card-text mb-4\" style=\"color: #727272\">\n            Introduce tu localidad o, simplemente tu código postal, y comprueba las sucursales cerca de tí.\n          </p>\n        </article>\n        <article>\n          <input\n            v-on:keyup.enter=\"newsearch()\"\n            v-model=\"search\"\n            class=\"mb-3\"\n            style=\"\n              margin-left: 0.01em;\n              padding-left: 1em;\n              width: 25em;\n              border: 0.1em solid #6297b7;\n              border-radius: 0.25em;\n            \"\n          />\n          <!-- Muestra un mensaje si el campo de búsqueda está vacío -->\n      <p v-if=\"search.trim() === ''\" style=\"color: red;\">Haz clic en el botón, para listar todos los resultados.</p>\n        </article>\n        <article>\n          <p class=\"card-text mb-4\">\n            <img\n              style=\"width: 1em; margin-right: 0.2em\"\n              src=\"/ubicacion.svg\"\n            /><span style=\"border-bottom: 0.1em solid #6297b7\"\n              >Utilizar ubicación actual</span\n            >\n          </p>\n        </article>\n        <article v-show=\"noresults === true\">\n          <p>Lo sentimos no encontramos resultados.</p>\n        </article>\n        <a style=\"text-decoration: none; color: white\" href=\"#\"\n          ><button\n            @click=\"newsearch()\"\n            class=\"mb-5\"\n            style=\"\n              width: 13em;\n              background: linear-gradient(\n\t\tto right,\n\t\t#df18df,\n\t\t#4c9ae7\n\t) ;\n              color: white;\n              font-size: 0.9em;\n              border-radius: 0.25em;\n              border: none;\n              text-align: center;\n              padding: 0.25em;\n            \"\n          >\n            <b>ENCUENTRA TU SUCURSAL</b>\n          </button></a\n        >\n      </section>\n      <section style=\"text-align: left\" class=\"col-4 d-none d-lg-block\">\n        <img\n          style=\"width: 75%\"\n          class=\"bd-placeholder-img\"\n          src=\"/sucursal.png\"\n        />\n      </section>\n      <div class=\"col-2\" />\n    </article>\n    <!--Fin de wireframe: Encuentra tu tienda-->\n    <!--After the search wireframe-->\n    <article\n      v-show=\"findstore === false\"\n      style=\"\n        background-color: #e4e4f4;\n        align-items: center;\n        display: flex;\n        margin-right: auto;\n        margin-left: auto;\n        position: relative;\n      \"\n      class=\"row roundedshadow-sm\"\n    >\n      <div class=\"col-2\" />\n      <section style=\"text-align: left\" class=\"col-5 p-4\">\n        <h4 style=\"color: #4c9ae7; width: 80%\" class=\"mb-3\">\n          <b v-if=\"amountresults > 1\"\n            >Se han encontrado {{ amountresults }} sucursales cerca de tu\n            ubicación actual</b\n          ><b v-if=\"amountresults === 1\"\n            >Se ha encontrado 1 sucursal cerca de tu ubicación actual</b\n          >\n        </h4>\n        <div\n          style=\"text-transform: capitalize\"\n          class=\"mb-4 text-body-secondary\"\n        >\n          <b style=\"font-size: 0.8em\">{{ search }}</b>\n        </div>\n        <div>\n          <article v-for=\"stores in aftersearch\" :key=\"stores.id\">\n            <section\n              v-if=\"\n                stores.Estado === 'ACTIVO' &&\n                stores.Empresa.includes('HR') &&\n                stores.Condición === 'Tienda'\n              \"\n            >\n              <a style=\"text-decoration: none; color: white\" href=\"#\">\n                <button\n                  class=\"row mb-4\"\n                  style=\"border: none; background: none; text-align: left; \"\n                  @click=\"maprute(stores.Ubicación)\"\n                >\n                  <article style=\"margin-top: 1em\" class=\"col-1 fs-4\">\n                    <img style=\"width: 1em\" src=\"/ubicacion.svg\" />\n                  </article>\n                  <article style=\"width: 20em\" class=\"col\">\n                    <div\n                      style=\"font-size: 0.9em\"\n                      class=\"mb-1 text-body-secondary\"\n                    >\n                      <b>{{ stores.Departamento }}</b>\n                    </div>\n                    <div\n                      style=\"font-size: 0.9em\"\n                      class=\"mb-1 text-body-secondary\"\n                    >\n                      {{ stores.Ubicación }}\n                    </div>\n                    <div style=\"font-size: 0.9em; color: #4c9ae7\" class=\"mb-1\">\n                      {{ stores.Teléfono }}\n                    </div>\n                    <div class=\"dropdown-center mb-4\">\n                      <button\n                        style=\"background: none; border: none\"\n                        class=\"text-body-secondary dropdown-toggle\"\n                        type=\"button\"\n                        data-bs-toggle=\"dropdown\"\n                        aria-expanded=\"false\"\n                      >\n                        Horarios\n                      </button>\n                      <section\n                        style=\"background: none; border: none\"\n                        class=\"dropdown-menu\"\n                      >\n                        <article>\n                          <div class=\"dropdown-item\">{{ stores.Horarios }}</div>\n                        </article>\n                      </section>\n                    </div>\n                  </article>\n                </button>\n              </a>\n            </section>\n          </article>\n        </div>\n      </section>\n      <section class=\"col-5\">\n        <article style=\"width: 80%\">\n          <iframe\n            scrolling=\"no\"\n            marginheight=\"0\"\n            marginwidth=\"0\"\n            :src=\"\n              'https://maps.google.com/maps?width=100%25&amp;height=400&amp;hl=es&amp;q=' +\n              where +\n              '&amp;t=&amp;z=14&amp;ie=UTF8&amp;iwloc=B&amp;output=embed'\n            \"\n            width=\"100%\"\n            height=\"400\"\n            frameborder=\"0\"\n            ><a href=\"https://www.gps.ie/car-satnav-gps/\"></a\n          ></iframe>\n        </article>\n      </section>\n      <div class=\"col-2\" />\n    </article>\n    <!--Fin de wireframe: After the search-->\n  </section>\n</template>\n<script>\n// Se importan los tatos de forma local en caso de falla de la api o falla de la Base de Datos\nimport sucursales from \"@/data/sucursales.json\";\nexport default {\n  setup() {\n    return {\n      stores: [],\n      where: \"\",\n      search: \"\",\n      aftersearch: [],\n      findstore: true,\n      noresults: false,\n      amountresults: null,\n    };\n  },\n  created() {\n    //  Se llama a la función getStores() para solicitar los datos legítimos de las tiendas de la base de datos\n    this.getStores();\n  },\n  methods: {\n    //  Función getStores(), solicita los datos a la API de todas las tiendas de la base de datos.\n    getStores() {\n      //  Se inicializa la variable 'stores' con una copia local de las tiendas de la base de datos, por si fallase en algún momento la conexión con la API o con la base de datos\n      this.stores = sucursales;\n      fetch(\"http://localhost:3200/api/sucursales\")\n        .then((r) => r.json())\n        .then((j) => {\n          this.stores = [];\n          this.stores = j;\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    },\n    //  Función newsearch(), recorrera en base a la búsqueda realizada, los datos 'stores' proporcionados por la api en busca de coincidencias en las columnas: Comunidad y Departamento...\n    //  NOTA:('Se ha agregado la columna CP. Solo se ha agregado para poder realizar la búsqueda por Código Postal a modo extra, creía recomendable separar el CP en la base de datos y filtrar por CP')\n    newsearch() {\n      // Se reasigna search a search sustituyendo todo el contenido por mayusculas y se reinicializa la variable 'aftersearch' con un array vacio '[ ]'\n      this.search = this.search.toUpperCase();\n      this.aftersearch = [];\n      //  Se recorre Stores\n      for (let i = 0; i < this.stores.length; i++) {\n        if (\n          this.stores[i].Comunidad.toUpperCase().includes(this.search) ||\n          this.stores[i].Departamento.toUpperCase().includes(this.search) ||\n          this.stores[i].CP.toUpperCase().includes(this.search)\n        ) {\n          //  Se introduce en cada vuelta del for los datos de cada tienda que cumpla la anterior condición\n          this.aftersearch.push(this.stores[i]);\n        }\n      }\n      //  Si la cantidad de tiendas que alberga la búsqueda es menor a 1 se asigna true a la variable 'noresults', activar 'noresults' proporciona la ventaja de saber si hay o no resultados\n      if (this.aftersearch.length < 1) {\n        this.noresults = true;\n      }\n      //  De lo contrario se asigna false a la variable 'noresults', se guarda la cantidad de resultados en 'amountresults' y se asigna false a la variable 'findstore', para poder ocultar el banner de búsqueda.\n      else {\n        this.noresults = false;\n        this.amountresults = this.aftersearch.length;\n        this.findstore = false;\n      }\n    },\n    //  Función maprute(), recibirá como parametro el contenido de la ubicación de la tienda que ha sido seleccionada y tratará dicha información para obtener como resultado la ruta dinámica a introducir en el iframe de GoogleMaps\n    maprute(whereis) {\n      //  Se vacia la variable 'where' y se crea una constante  'newreplace'  con un array vacio\n      this.where = \"\";\n      const newreplace = [];\n      //  Se recorre la ubicación proporcionada con el motivo de encontrar los espacios del string y sustituirlos por '%20' y por cada vuelta se irá alojando en 'newreplace' el contenido a transformar a posterior\n      for (let i = 0; i < whereis.length; i++) {\n        newreplace.push(whereis[i].replace(\" \", \"%20\"));\n      }\n      // Se transforma el array en un string con el uso de join: une todos los elementos de una matriz en una cadena de texto y devuelve esa cadena para asignarla a una variable a ser utilizada\n      this.where = newreplace.join(\"\");\n    },\n  },\n};\n</script>\n<style scoped>\n.dropdown-item {\n  font-size: 1em;\n  padding-left: 6em;\n  margin-top: -1em;\n  margin-bottom: 2em;\n}\n.dropdown-item:hover {\n  background: none;\n}\n</style>\n"],"mappings":";AA6MA;AACA,OAAOA,UAAS,MAAO,wBAAwB;AAC/C,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,WAAW,EAAE,EAAE;MACfC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,KAAK;MAChBC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACC,SAAS,CAAC,CAAC;EAClB,CAAC;EACDC,OAAO,EAAE;IACP;IACAD,SAASA,CAAA,EAAG;MACV;MACA,IAAI,CAACR,MAAK,GAAIF,UAAU;MACxBY,KAAK,CAAC,sCAAsC,EACzCC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,EACpBF,IAAI,CAAEG,CAAC,IAAK;QACX,IAAI,CAACd,MAAK,GAAI,EAAE;QAChB,IAAI,CAACA,MAAK,GAAIc,CAAC;MACjB,CAAC,EACAC,KAAK,CAAC,UAAUC,KAAK,EAAE;QACtBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACN,CAAC;IACD;IACA;IACAG,SAASA,CAAA,EAAG;MACV;MACA,IAAI,CAACjB,MAAK,GAAI,IAAI,CAACA,MAAM,CAACkB,WAAW,CAAC,CAAC;MACvC,IAAI,CAACjB,WAAU,GAAI,EAAE;MACrB;MACA,KAAK,IAAIkB,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAI,IAAI,CAACrB,MAAM,CAACsB,MAAM,EAAED,CAAC,EAAE,EAAE;QAC3C,IACE,IAAI,CAACrB,MAAM,CAACqB,CAAC,CAAC,CAACE,SAAS,CAACH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAAC,IAAI,CAACtB,MAAM,KAC3D,IAAI,CAACF,MAAM,CAACqB,CAAC,CAAC,CAACI,YAAY,CAACL,WAAW,CAAC,CAAC,CAACI,QAAQ,CAAC,IAAI,CAACtB,MAAM,KAC9D,IAAI,CAACF,MAAM,CAACqB,CAAC,CAAC,CAACK,EAAE,CAACN,WAAW,CAAC,CAAC,CAACI,QAAQ,CAAC,IAAI,CAACtB,MAAM,GACpD;UACA;UACA,IAAI,CAACC,WAAW,CAACwB,IAAI,CAAC,IAAI,CAAC3B,MAAM,CAACqB,CAAC,CAAC,CAAC;QACvC;MACF;MACA;MACA,IAAI,IAAI,CAAClB,WAAW,CAACmB,MAAK,GAAI,CAAC,EAAE;QAC/B,IAAI,CAACjB,SAAQ,GAAI,IAAI;MACvB;MACA;MAAA,KACK;QACH,IAAI,CAACA,SAAQ,GAAI,KAAK;QACtB,IAAI,CAACC,aAAY,GAAI,IAAI,CAACH,WAAW,CAACmB,MAAM;QAC5C,IAAI,CAAClB,SAAQ,GAAI,KAAK;MACxB;IACF,CAAC;IACD;IACAwB,OAAOA,CAACC,OAAO,EAAE;MACf;MACA,IAAI,CAAC5B,KAAI,GAAI,EAAE;MACf,MAAM6B,UAAS,GAAI,EAAE;MACrB;MACA,KAAK,IAAIT,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIQ,OAAO,CAACP,MAAM,EAAED,CAAC,EAAE,EAAE;QACvCS,UAAU,CAACH,IAAI,CAACE,OAAO,CAACR,CAAC,CAAC,CAACU,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;MACjD;MACA;MACA,IAAI,CAAC9B,KAAI,GAAI6B,UAAU,CAACE,IAAI,CAAC,EAAE,CAAC;IAClC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}